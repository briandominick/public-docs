<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Cerebro Database Command-Line Interface | Cerebro Data User Documentation</title>
<link rel="stylesheet" href="theme/css/syntax.css">


<script src="https://use.fontawesome.com/d9343c4626.js"></script>

<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="theme/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
<link rel="stylesheet" href="theme/css/asciidoctor.css">
<link rel="stylesheet" href="theme/css/custom.css">
<link rel="stylesheet" href="theme/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="theme/css/theme-green.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="theme/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="theme/js/toc.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="theme/js/customscripts.js"></script>

<script>
$( document ).ready(function() {
  $( "blockquote:contains('Note')" ).addClass( "admonitionblock note" );
  $( "blockquote:contains('Warning')" ).addClass( "admonitionblock warning" );
  $( "blockquote:contains('Tip')" ).addClass( "admonitionblock tip" );
  $( ".admonitionblock.note" ).prepend( '<i class="fa fa-check admonition"></i>' );
  $( ".admonitionblock.warning" ).prepend( '<i class="fa fa-exclamation-triangle admonition"></i>' );
  $( ".admonitionblock.tip" ).prepend( '<i class="fa fa-lightbulb-o admonition"></i>' );
});
</script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Cerebro Data User Guides" href="http://localhost:4400/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html"><img src="assets/images/cerebro-wordmark-white.png" /></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> -->
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="search">Search</a></li>
                
                
                
                <li><a href="https://cerebrodata.zendesk.com/hc/en-us" target="_blank">Support</a></li>
                
                
                
                <li><a href="https://blog.cerebrodata.com/" target="_blank">Cerebro Blog</a></li>
                
                
                
                <li><a href="https://cerebrodata.com" target="_blank">cerebrodata.com</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!-- comment out this block if you want to hide search
                <li class="dropdown">

                  <div id="search-demo-container">
                      <form action="/search" method="GET">
                      <input type="text" name="q" id="search-input" placeholder="Search the docs...">
                      </form>
                  </div>

                </li>
                end search -->
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                


<ul id="mysidebar" class="nav affix">
  <li class="sidebarTitle"> </li>
  
  
  
  <li>
      <a href="#">Discover</a>
      <ul>
          
          
          
          <li><a href="product-overview">Product Overview</a> </li>
          
          
          
          
          
          
          <li><a href="cdas-overview">CDAS Overview</a> </li>
          
          
          
          
          
          
          <li><a href="cerebro-catalog-overview">Cerebro Catalog Overview</a> </li>
          
          
          
          
          
          
          <li><a href="faq">Frequently Asked Questions</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Install</a>
      <ul>
          
          
          
          <li><a href="install">Installation Guide</a> </li>
          
          
          
          
          
          
          <li><a href="advanced-install">Advanced Installation Option</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-sizing">Cluster Sizing</a> </li>
          
          
          
          
          
          
          <li><a href="memory-usage">Platform Memory Usage</a> </li>
          
          
          
          
          
          
          <li><a href="kerberos-cluster-setup">Kerberos</a> </li>
          
          
          
          
          
          
          <li><a href="secure-cerebro-rest-api-ldap">LDAP Authentication</a> </li>
          
          
          
          
          
          
          <li><a href="secure-cerebro-rest-api-oath">OAuth Authentication</a> </li>
          
          
          
          
          
          
          <li><a href="secure-deployment-manager-rest-api">Deployment Manager REST Security</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-types">Cluster Types</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Use</a>
      <ul>
          
          
          
          <li><a href="web-ui-basics">Web UI Basics</a> </li>
          
          
          
          
          
          
          <li><a href="web-ui-admin">Admin Web UI</a> </li>
          
          
          
          
          
          
          <li><a href="supported-sql">Supported SQL</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-administration">Cluster Administration</a> </li>
          
          
          
          
          
          
          <li><a href="cluster-launch-plugin-api">Cluster Launch API</a> </li>
          
          
          
          
          
          
          <li><a href="auditing">Auditing</a> </li>
          
          
          
          
          
          
          <li class="active"><a href="cerebro-database-cli">Database CLI</a></li>
          
          
          
          
          
          
          <li><a href="ip-address-management">IP Address Management</a> </li>
          
          
          
          
          
          
          <li><a href="kubernetes-dashboard-quickstart">Kubernetes Dashboard Quickstart</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Integrate</a>
      <ul>
          
          
          
          <li><a href="cdas-cdh-integration">CDH Integration</a> </li>
          
          
          
          
          
          
          <li><a href="client-integration">Client Integration</a> </li>
          
          
          
          
          
          
          <li><a href="emr-integration">EMR Integration</a> </li>
          
          
          
          
          
          
          <li><a href="pycerebro">Native Python Integration</a> </li>
          
          
          
          
          
          
          <li><a href="tableau-web-data-connector">Tableau Integration</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Develop</a>
      <ul>
          
          
          
          <li><a href="cdas-authentication">Authentication</a> </li>
          
          
          
          
          
          
          <li><a href="docker-quickstart">Docker Quickstart</a> </li>
          
          
          
          
          
          
          <li><a href="catalog-rest-api">Catalog API</a> </li>
          
          
          
          
          
          
          <li><a href="client-configs">Client Configuration</a> </li>
          
          
          
          
          
          
          <li><a href="complex-types">Complex Data Types</a> </li>
          
          
          
          
          
          
          <li><a href="data-types">Supported Data Types</a> </li>
          
          
          
          
          
          
          <li><a href="extending-cdas">Extending CDAS</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Reference</a>
      <ul>
          
          
          
          <li><a href="release-notes">Release Notes</a> </li>
          
          
          
          
          
          
          <li><a href="quick-recipes">Quick Recipes</a> </li>
          
          
          
          
          
          
          <li><a href="service-port-assignments">Service Ports</a> </li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
    
    <li>
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2', title: 'On This Page' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    </li>
    

</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-content">

   

    


    

  <h1 id="cerebro-database-command-line-interface">Cerebro Database Command-Line Interface</h1>

<p>The Database Command-line Interface (CLI) provides client access to running Cerebro
Database services.</p>

<h2 id="installation">Installation</h2>

<p>For a fresh setup, you can install with:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># linux</span>
curl <span class="nt">-O</span> https://s3.amazonaws.com/cerebrodata-release-useast/0.8.1/cli/linux/dbcli <span class="o">&amp;&amp;</span> chmod 755 ./dbcli

<span class="c"># osx</span>
curl <span class="nt">-O</span> https://s3.amazonaws.com/cerebrodata-release-useast/0.8.1/cli/darwin/dbcli <span class="o">&amp;&amp;</span> chmod 755 ./dbcli

<span class="c"># verify the download executes</span>
./dbcli <span class="nt">--help</span>
</code></pre></div></div>

<h2 id="configuration">Configuration</h2>

<p>The server location and/or default database can be specified to the CLI through the
<code class="highlighter-rouge">database use</code> command or can be configured from a configuration file which is helpful
if interacting with the same server and/or database repeatedly. The configuration file
is stored in <code class="highlighter-rouge">~/.cerebro/configs.json</code>.</p>

<p>To configure the location of the catalog service, the file should contain:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"cdas_rest_server"</span>: <span class="s2">"&lt;host:port of catalog admin&gt;"</span>
  <span class="s2">"database"</span>: <span class="s2">"&lt;name of the database&gt;"</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="quick-start">Quick Start</h2>

<p>Below are the set of commands to get started with the DBCli and demonstrate some of
Cerebro’s capabilities. In this tutorial, authentication is done using tokens that
have already been created.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># configure dbcli as admin user, verify it can see the sample tables</span>
./dbcli database <span class="nt">--cdas_rest_server</span> &lt;host:port of catalog admin&gt; use cerebro_sample
./dbcli set-token &lt;TOKEN&gt;
./dbcli set-ssl <span class="nb">enable</span> <span class="o">(</span>only required <span class="k">if </span>SSL is enabled <span class="k">in </span>CDAS<span class="o">)</span>
./dbcli show configs
./dbcli database list
./dbcli dataset <span class="nb">cat </span>sample

<span class="c"># we, by default, create a single role, the admin_role, which has system wide access. as</span>

<span class="c"># the admin, you can create and grant roles. we'll create a role, "test_role" and grant</span>

<span class="c"># that to users in the "test" group.</span>
./dbcli dataset hive-ddl <span class="s2">"show tables in cerebro_sample"</span>
./dbcli dataset hive-ddl <span class="s2">"create role test_role"</span>
./dbcli dataset hive-ddl <span class="s2">"show roles"</span>
./dbcli dataset hive-ddl <span class="s2">"grant role test_role to group test"</span>

<span class="c"># next, we will give select (aka read) access to the sample table to this new role"</span>
./dbcli dataset hive-ddl <span class="s2">"grant select on table cerebro_sample.sample to role test_role"</span>

<span class="c"># switch to a user that only has the test role, they should now be able to read from</span>

<span class="c"># the sample table. you'll notice they don't have access to the other tables and dbs.</span>
&lt;switch to user with group <span class="s1">'test'</span><span class="o">&gt;</span>

<span class="c"># run</span>
./dbcli set-token &lt;TOKEN&gt;
./dbcli dataset list
./dbcli dataset <span class="nb">cat </span>sample

<span class="c"># trying to read from the users table will fail with an authorization error as this role</span>

<span class="c"># has only been granted one table.</span>
./dbcli dataset <span class="nb">cat </span>users

<span class="c"># to register new databases/datasets, use the database hive-ddl command. this</span>

<span class="c"># is hiveql compatible. for example:</span>
./dbcli dataset hive-ddl <span class="s2">"create database test_db"</span>
./dbcli dataset hive-ddl <span class="s2">"create external table test_db.new_table(...) LOCATION 's3://...'"</span>
</code></pre></div></div>

<h2 id="getting-started">Getting started</h2>

<p>To get started, run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli --help
</code></pre></div></div>

<p>Which will display the list of available commands. To use most commands, you will need
a login token. Use:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli get-token --help
</code></pre></div></div>

<p>for the available options.</p>

<p>For all commands entering</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli *command* --help
</code></pre></div></div>

<p>will display the available options and a brief description of each option.</p>

<p>To see your currently saved configuration options, you can enter:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli show configs
</code></pre></div></div>

<h2 id="database-related-commands">Database Related Commands</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli show status
</code></pre></div></div>

<p>Will return a response in the form:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Server &lt;host:port&gt; is up and accessible.
</code></pre></div></div>

<p>When the server is up and available. <code class="highlighter-rouge">&lt;host:port&gt;</code> reflects the configured server
and port.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli database list
</code></pre></div></div>

<p>Will list the databases available to you on the configured server.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dbcli dataset list
</code></pre></div></div>

<p>Will list the datasets available to you in the selected database.</p>


    <div class="tags">
        
    </div>




</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2018 Cerebro Data, Inc. All rights reserved. <br />
 Site last generated: Apr 20, 2018 <br />
<p><img src="assets/images/cerebro-brain-logo.png" alt="Company logo" style="width: 160px" /></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
